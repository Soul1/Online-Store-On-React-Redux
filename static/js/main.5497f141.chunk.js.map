{"version":3,"sources":["actions/filter.js","components/BookCard.jsx","containers/BookCard.js","actions/cart.js","components/Filter.jsx","containers/Filter.js","components/Menu.jsx","containers/Menu.js","components/App.jsx","containers/App.js","actions/books.js","reducers/books.js","reducers/cart.js","reducers/filter.js","reducers/index.js","index.js","store.js"],"names":["setFilter","filter","type","payload","Book","props","title","author","image","price","addToCart","addedCount","Card","Image","src","Content","Header","Meta","className","extra","Icon","name","Button","onClick","bind","connect","cart","id","items","reduce","count","book","obj","removeFromCart","Filter","filterBy","searchQuery","setSearchQuery","Menu","secondary","Item","active","position","Input","icon","onChange","e","target","value","placeholder","CartComponent","List","selection","divided","verticalAlign","floated","color","avatar","TopMenu","totalPrice","Popup","trigger","content","map","on","hideOnScroll","total","length","uniqBy","o","App","setBooks","this","axios","get","then","data","books","isReady","Container","Group","itemsPerRow","i","key","React","Component","searchBooks","orderBy","sortBy","toLowerCase","indexOf","filterBooks","initialState","combineReducers","state","action","store","createStore","rootReducer","applyMiddleware","logger","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5497f141.chunk.js","sourcesContent":["export const setFilter = filter => ({\r\n  type: 'SET_FILTER',\r\n  payload: filter\r\n});\r\nexport const setSearchQuery = value => ({\r\n  type: 'SET_QUERY',\r\n  payload: value\r\n});","import React from \"react\";\r\nimport {Card, Icon, Image, Button} from 'semantic-ui-react'\r\n\r\nconst Book = (props) => {\r\n  const {title, author, image, price, addToCart, addedCount} = props;\r\n  return (\r\n    <Card>\r\n      <Image src={image}/>\r\n      <Card.Content>\r\n        <Card.Header>{title}</Card.Header>\r\n        <Card.Meta>\r\n          <span className='date'>{author}</span>\r\n        </Card.Meta>\r\n      </Card.Content>\r\n      <Card.Content extra>\r\n        <b>{price}</b>\r\n        <Icon name='rub'/>\r\n      </Card.Content>\r\n      <Button onClick={addToCart.bind(this, props)}>\r\n        Добавить в корзину &nbsp;{addedCount > 0 && `(${addedCount})`}\r\n      </Button>\r\n    </Card>\r\n  )\r\n};\r\n\r\nexport default Book;","import {connect} from \"react-redux\";\r\nimport Book from \"../components/BookCard\";\r\nimport {addToCart, removeFromCart} from \"../actions/cart\";\r\n\r\n\r\nconst mapStateToProps = ({cart}, {id}) => ({\r\n  addedCount: cart.items.reduce(\r\n    (count, book) => count + (book.id === id ? 1 : 0),\r\n    0,\r\n  ),\r\n});\r\n\r\nexport default connect(mapStateToProps, {addToCart, removeFromCart})(Book);","export const addToCart = obj => ({\r\n  type: 'ADD_BOOK_TO_CART',\r\n  payload: obj\r\n});\r\nexport const removeFromCart = id => ({\r\n  type: 'REMOVE_BOOK_FROM_CART',\r\n  payload: id\r\n});","import React from 'react';\r\nimport {Input, Menu} from 'semantic-ui-react'\r\n\r\nconst Filter = ({setFilter, filterBy, searchQuery, setSearchQuery}) => {\r\n\r\n  return (\r\n    <Menu secondary>\r\n      <Menu.Item\r\n        active={filterBy === 'all'}\r\n        onClick={setFilter.bind(this, 'all')}\r\n      >Все\r\n      </Menu.Item>\r\n      <Menu.Item\r\n        active={filterBy === 'price_low'}\r\n        onClick={setFilter.bind(this, 'price_low')}\r\n      >Цена (дешевые)\r\n      </Menu.Item>\r\n      <Menu.Item\r\n        active={filterBy === 'price_high'}\r\n        onClick={setFilter.bind(this, 'price_high')}\r\n      >Цена (дорогие)\r\n      </Menu.Item>\r\n      <Menu.Item\r\n        active={filterBy === 'author'}\r\n        onClick={setFilter.bind(this, 'author')}\r\n      >По автору\r\n      </Menu.Item>\r\n      <Menu.Menu position='right'>\r\n        <Menu.Item>\r\n          <Input icon='search'\r\n                 onChange={e => setSearchQuery(e.target.value)}\r\n                 value={searchQuery}\r\n                 placeholder='Поиск...'/>\r\n        </Menu.Item>\r\n      </Menu.Menu>\r\n    </Menu>\r\n  )\r\n}\r\nexport default Filter;","import {connect} from \"react-redux\";\r\nimport Filter from \"../components/Filter\";\r\nimport {setFilter, setSearchQuery} from \"../actions/filter\";\r\n\r\n\r\nconst mapStateToProps = ({filter}) => ({\r\n  filterBy: filter.filterBy,\r\n});\r\n\r\nexport default connect\r\n(mapStateToProps,\r\n  {setFilter, setSearchQuery})\r\n(Filter);","import React from \"react\";\r\nimport {Menu, Popup, List, Button, Image } from 'semantic-ui-react'\r\n\r\nconst CartComponent = ({ title, id, image, removeFromCart }) => (\r\n  <List selection divided verticalAlign=\"middle\">\r\n    <List.Item>\r\n      <List.Content floated=\"right\">\r\n        <Button onClick={removeFromCart.bind(this, id)} color=\"red\">\r\n          Удалить\r\n        </Button>\r\n      </List.Content>\r\n      <Image avatar src={image} />\r\n      <List.Content>{title}</List.Content>\r\n    </List.Item>\r\n  </List>\r\n);\r\nconst TopMenu = ({totalPrice, count, items}) => {\r\n\r\n  return (\r\n    <Menu>\r\n      <Menu.Item>\r\n        Магазин книг\r\n      </Menu.Item>\r\n\r\n      <Menu.Menu position='right'>\r\n        <Menu.Item>\r\n          Итого: &nbsp; <b>{totalPrice}</b> &nbsp; Pyb.\r\n        </Menu.Item>\r\n        <Popup\r\n          trigger={\r\n            <Menu.Item name=\"help\">\r\n              Корзина (<b>{count}</b>)\r\n            </Menu.Item>\r\n          }\r\n          content={items.map(book => (\r\n            <CartComponent {...book} />\r\n          ))}\r\n          on=\"click\"\r\n          hideOnScroll\r\n        />\r\n      </Menu.Menu>\r\n    </Menu>\r\n  );\r\n}\r\n\r\nexport default TopMenu;","import {connect} from \"react-redux\";\r\nimport Menu from \"../components/Menu\";\r\nimport uniqBy from 'lodash/uniqBy'\r\n\r\nconst mapStateToProps = ({cart}) => ({\r\n  totalPrice: cart.items.reduce((total, book) => total + book.price, 0),\r\n  count: cart.items.length,\r\n  items: uniqBy(cart.items, o => o.id)\r\n});\r\n\r\nexport default connect\r\n(mapStateToProps)\r\n(Menu);","import React from 'react';\r\nimport {Card, Container} from 'semantic-ui-react'\r\nimport axios from \"axios\";\r\nimport Book from '../containers/BookCard'\r\nimport Filter from '../containers/Filter'\r\nimport Menu from '../containers/Menu'\r\n\r\nclass App extends React.Component {\r\n  componentWillMount() {\r\n    const {setBooks} = this.props;\r\n    axios.get('https://soul1.github.io/shoppingCardOnReactRedux/books.json').then(({data}) => {\r\n      setBooks(data)\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {books, isReady} = this.props;\r\n    return (\r\n      <Container>\r\n        <Menu />\r\n        <Filter/>\r\n        <Card.Group itemsPerRow={4}>\r\n          {!isReady\r\n            ? 'Loading...'\r\n            : books.map((book, i) =>\r\n              <Book key={i} {...book}/>)}\r\n        </Card.Group>\r\n      </Container>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import {connect} from 'react-redux';\r\nimport {setBooks} from '../actions/books';\r\nimport {setFilter} from '../actions/filter';\r\nimport App from \"../components/App\";\r\nimport orderBy from 'lodash/orderBy';\r\n\r\nconst sortBy = (books, filterBy) => {\r\n  switch (filterBy) {\r\n\r\n    case 'price_high':\r\n    return orderBy(books, 'price', 'desc');\r\n    break;\r\n    case 'price_low':\r\n    return orderBy(books, 'price', 'asc');\r\n    break;\r\n    case 'author':\r\n    return orderBy(books, 'author', 'asc');\r\n    break;\r\n    case 'all':\r\n    default:\r\n      return books\r\n  }\r\n};\r\nconst filterBooks = (books, searchQuery) =>\r\n  books.filter(\r\n    o =>\r\n      o.title.toLowerCase().indexOf(searchQuery.toLowerCase()) >= 0 ||\r\n      o.author.toLowerCase().indexOf(searchQuery.toLowerCase()) >= 0\r\n  );\r\nconst searchBooks = (books, filterBy, searchQuery) => {\r\n  return sortBy(filterBooks(books, searchQuery), filterBy)\r\n};\r\n\r\nconst mapStateToProps = ({books, filter}) => ({\r\n  books: books.items &&\r\n    searchBooks(books.items, filter.filterBy, filter.searchQuery),\r\n  isReady: books.isReady\r\n});\r\n\r\nexport default connect(mapStateToProps, {setBooks, setFilter})(App);\r\n","export const setBooks = (books) => ({\r\n  type: 'SET_BOOKS',\r\n  payload: books\r\n})","const initialState = {\r\n  isReady: false,\r\n  items: null,\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_BOOKS':\r\n      return {\r\n        ...state,\r\n        items: action.payload,\r\n        isReady: true\r\n      };\r\n      break;\r\n    case 'SET_IS_READY':\r\n      return {\r\n        ...state,\r\n        isReady: action.payload\r\n      };\r\n      break;\r\n    default:\r\n      return state\r\n  }\r\n}","const initialState = {\r\n  items: []\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'ADD_BOOK_TO_CART':\r\n      return {\r\n        ...state,\r\n        items: [\r\n          ...state.items,\r\n          action.payload\r\n        ]\r\n      };\r\n      break;\r\n    case 'REMOVE_BOOK_FROM_CART':\r\n      return {\r\n        ...state,\r\n        items: state.items.filter(o => o.id !== action.payload)\r\n      };\r\n      break;\r\n    default:\r\n      return state\r\n  }\r\n}","const initialState = {\r\n  filterBy: 'all',\r\n  searchQuery: ''\r\n};\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_FILTER':\r\n      return {\r\n        ...state,\r\n        filterBy: action.payload\r\n      };\r\n      break;\r\n    case 'SET_QUERY':\r\n      return {\r\n        ...state,\r\n        searchQuery: action.payload\r\n      };\r\n      break;\r\n    default:\r\n      return state\r\n  }\r\n}","import {combineReducers} from 'redux'\r\nimport books from './books'\r\nimport cart from './cart'\r\nimport filter from './filter'\r\n\r\nexport default combineReducers({\r\n  books,\r\n  cart,\r\n  filter\r\n})","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {Provider} from 'react-redux'\r\nimport 'semantic-ui-css/semantic.min.css'\r\nimport AppC from './containers/App';\r\nimport './index.scss'\r\n\r\nimport createStore from './store'\r\nconst store = createStore();\r\n\r\n\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <AppC/>\r\n  </Provider>, document.getElementById('root'));\r\n\r\n","import {createStore, applyMiddleware} from 'redux'\r\nimport logger from 'redux-logger'\r\n\r\nimport rootReducer from './reducers'\r\n\r\nexport default () => {\r\n  const store = createStore(rootReducer, applyMiddleware(logger));\r\n  return store\r\n};\r\n"],"sourceRoot":""}